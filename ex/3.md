# :clapper: La escena

En los ejercicios anteriores, vimos que para crear una escena de VR, deb√≠amos utilizar el elemento `<a-scene>`. Pues bien, la escena o [a-scene](https://aframe.io/docs/0.7.0/core/scene.html) no es mas que la ra√≠z u objeto global y en all√≠, estan empaquetadas todas las entidades necesarias para darle vida a nuestra experiencia de VR.

`<a-scene>` como su nombre lo indica, es an√°loga a una escena en cine o teatro. Contiene la c√°mara, la configuraci√≥n de las luces, la interfaz de usuario para entrar en modo VR y el sistema de componentes que la componen. As√≠ pues, este elemento maneja por nosotros toda la configuraci√≥n necesaria para poner en movimiento la escena de VR:

* Canvas, renderer y render loop
* C√°mara e iluminaci√≥n por defecto
* Configura los polyfill necesarios para que la escena de VR corra en nuestros dispositivos
* Agrega la interfaz de usuario necesaria para entrar en modo VR

## :microscope: Caracter√≠sticas principales

La escena tiene sus propios eventos, m√©todos, propiedades y componentes. A continuaci√≥n veremos los principales componentes, toda la informaci√≥n la puedes encontrar en la documentaci√≥n oficial del elemento [a-scene](https://aframe.io/docs/0.7.0/core/scene.html).

En este punto, vamos a utilizar la escena que creamos en el ejercicio anterior para analizar los componentes propios de la escena. Recuerda que por ahora estamos utilizando un editor de c√≥digo online como [JSFiddle](https://jsfiddle.net) o [Codepen](https://codepen.io).

```html
<script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>

<a-scene>
  <a-plane position="0 0 -8" rotation="-90 0 0" width="8" height="4" color="peru"></a-plane>
  <a-torus position="0 0 -8" color="#213041" arc="360" radius="4.5" radius-tubular="0.1"></a-torus>
  <a-torus-knot position="0 2 -8" color="#B84A39" arc="180" p="2" q="7" radius="1" radius-tubular="0.1"></a-torus-knot>
  <a-octahedron position="-2 1 -6" rotation="0 45 0" color="#FF926B" radius="1"></a-octahedron>
  <a-cone position="2 1 -6" rotation="-90 25 0" color="green" radius-bottom="0" radius-top="0.5"></a-cone>
  <a-sky color="skyblue"></a-sky>
</a-scene>
````

### :bar_chart: Stats
El componente [stats](https://aframe.io/docs/0.7.0/components/stats.html) nos muestra ciertas m√©tricas relacionadas con el rendimiendo de nuestra escena de VR. Estas m√©tricas corresponden √∫nicamente al elemento `<a-scene>`.

<p align="center">
 <img src="../docs/img/stats.png" alt="stats">
</p>

Para activarlo, lo √∫nico que debemos hacer es incluir la palabra 'stats' dentro del tag de la escena:

```html
<a-scene stats>
  ...
  ...
</a-scene>
````
Estas son las m√©tricas que nos muestra el componente stats:
*  **fps**: Frames per second, framerate.
* **requestAnimationFrame (raf)**: Latencia
* **Textures**: N√∫mero de [texturas](#point_right-aclaraciones) de three.js en la escena. Un n√∫mero bajo, indica que la escena est√° usando poca memoria y enviando poca informaci√≥n a la [GPU](#point_right-aclaraciones).
* **Programs**: N√∫mero de [Shaders](#point_right-aclaraciones) GLSL en la escena
* **Geometries**: N√∫mero de [geometrias](#point_right-aclaraciones) de three.js en la escena. Un n√∫mero bajo, indica que la escena est√° usando poca memoria.
* **Vertices**: N√∫mero de [v√©rtices](#point_right-aclaraciones) en la escena.
* **Faces**: N√∫mero de [faces](#point_right-aclaraciones) en la escena.
* **Calls**: N√∫mero de llamados a dibujar en cada frame de la escena.
* **Load time**: Tiempo en ms que le toma a la escena empezar el render.
* **Entities**: N√∫mero de entidades de A-Frame.

### :eyeglasses: VR mode UI
El componente [vr-mode-ui](https://aframe.io/docs/0.7.0/components/vr-mode-ui.html) activa o desactiva la UI que permite entrar en modo VR. En desktop, el modo VR es a pantalla completa, mientras que en m√≥vil divide la pantalla en dos para ver la escena con un headset.

<p align="center">
 <img src="../docs/img/enter.png" alt="stats">
</p>

Este componente tiene como √∫nica propiedad el atributo 'Enabled', cuyo valor por defecto es 'true'. As√≠ que para desactivarlo y ocultar este bot√≥n, debemos cambiar este valor:

```html
<a-scene vr-mode-ui="enabled: false">
  ...
  ...
</a-scene>
````

Esta propiedad resulta bastante √∫til si queremos por ejemplo un modo VR personalizado, en el que a trav√©s de una cierta interacci√≥n por parte del usuario, la aplicaci√≥n entre en modo VR. Otro caso podria ser que no queramos que el usuario pueda entrar en este modo, ya que como ya has podido ver, A-Frame no solo nos sirve para experiencias de realidad virtual, sino que tambi√©n podemos crear todo tipo de aplicaciones 3D para web sin tener que preocuparnos por Three.js o WebGL.

### :foggy: Fog
El componente [Fog](https://aframe.io/docs/0.7.0/components/fog.html) oscurece las entidades presentes en la escena con un efecto de niebla a una cierta distancia de la c√°mara.
Para agregar este efecto, debemos especificar el tipo de distribuci√≥n de la nieba, ya sea lineal (linear) o exponencial (exponential), as√≠ como el color. Si queremos una distribuci√≥n linal, es posible especificar la distancia m√≠nima y m√°xima a las cuales se aplica dicho efecto. De la misma manera, si se usa una distribuci√≥n exponencial, es posible especificar que tan r√°pido crece la densidad de la niebla. [Ac√°](https://aframe.io/aframe/examples/test/fog/) puedes ver un ejemplo de uso de este efecto.

```html
<a-scene fog="type: linear; color: #AAA">
  ...
  ...
</a-scene>
````

___
### :point_right: Aclaraciones
>Texturas: Es la representaci√≥n digital de la superficie de un objeto. Es un concepto clave en Three.js a la hora de representar objetos en tres dimensiones.

>GPU: Unidad de procesamiento gr√°fico, es un coprocesador dedicado al procesamiento de gr√°ficos para aplicaciones como videojuegos o aplicaciones 3D interactivas.

>Shaders: Un shader, es un programa que se encarga de relizar los c√°lculos y operaciones gr√°ficas necesarias para producir los niveles adecuados de luz, oscuridad y color en una imagen, as√≠ como efectos especiales y post procesamiento de video. Generalmente corre en la GPU.

>Geometr√≠as: Una geometr√≠a, determina la forma de los objetos que se dibujan en Three.js. Est√° compuesta de una colecci√≥n de v√©rtices y 'faces' que definen dicha forma.

>V√©rtices: En el contexto de Three.js, un v√©rtice es un punto con coordenadas en los ejes x, y, z. Cuando se crea una geometr√≠a, realmente se est√°n creando un cierto n√∫mero de v√©rtices que juntos dan forma a un objeto. Los v√©rtices, como tal, no determinan la forma de un objeto. Esta forma est√° definida por c√≥mo se conectan entre s√≠ dichos v√©rtices; a este concepto se le conoce como 'faces'.

>Faces: Un 'Face' en Three.js consiste de tres v√©rtices que juntos llenan una cierta √°rea. Esta √°rea se conoce como 'Face'.

### üìù [Soluci√≥n](https://codepen.io/fabiojcortes/pen/MrrZjY)
