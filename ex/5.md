# :collision: Animaci贸n

Para agregar animaciones a nuestras escenas en A-Frame, debemos agregar el elemento `<a-animation>` como 'hijo' de la entidad que queramos animar.

Vamos a ver como funcionan las animaciones con un ejemplo sencillo. Empezaremos definiendo un `<a-torus-knot>` y un `<a-sky>` dentro de nuestra escena:

```html
<a-scene>
  <a-torus-knot position="0 2 -6" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1"></a-torus-knot>
  <a-sky color="skyblue"></a-sky>
</a-scene>
````

Una vez definidos estos componentes, debemos incluir el elemento `<a-animation>` como 'hijo' del cual queremos animar, en este caso, el torus-knot. Dentro de este tag, debemos especificar los detalles de nuestra animaci贸n, empezando por el atributo que queremos animar, as铆 como los valores sobre los que vamos a hacer la transici贸n.

Para empezar, vamos a animar la posici贸n del elemento y con una duraci贸n de 3 segundos, vamos a moverlo desde la posici贸n inicial "0 2 -8" hasta "0 2 -3".

```html
<a-scene>
  <a-torus-knot position="0 2 -8" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1">
    <a-animation attribute="position" dur="3000" from="0 2 -8" to="0 2 -3" > </a-animation>
  </a-torus-knot>
  <a-sky color="skyblue"></a-sky>
</a-scene>
````

Al correr el programa, deber铆amos ver lo siguiente:

<p align="center">
 <img src="../docs/img/a1.gif" alt="A-Frame" width="200">
</p>

Ya tenemos una primera animaci贸n para nuestro elemento, pero esta solo ocurre una vez al cargar el programa. Utilizando el atributo `repeat`, podemos especificar cuantas veces debe correr la animaci贸n o si queremos que se haga de manera infinita con `repeat="indefinite"`. Tambi茅n vamos a agregar un peque帽o delay, para que la animaci贸n empiece 2 segundos despu茅s de que el programa arranque con `begin="2000"`.

```html
<a-scene>
  <a-torus-knot position="0 2 -8" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1">
    <a-animation attribute="position" dur="3000" from="0 2 -8" to="0 2 -3" begin="2000" repeat="indefinite"> </a-animation>
  </a-torus-knot>
  <a-sky color="skyblue"></a-sky>
</a-scene>
````

Ahora al correr el programa, deber铆amos ver lo siguiente:

<p align="center">
 <img src="../docs/img/a2.gif" alt="A-Frame" width="200">
</p>

Ahora nuestro elemento se anima de forma infinita, sin embargo, se ve un poco forzado el inicio de la animaci贸n, ya que el torus-knot vuelve a la posici贸n inicial para volver a comenzar. Esto lo podemos arreglar con el atributo `direction` de la siguiente manera:

```html
<a-scene>
    <a-torus-knot position="0 2 -8" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1">
      <a-animation attribute="position" dur="3000" from="0 2 -8" to="0 2 -3" repeat="indefinite" direction="alternate" > </a-animation>
    </a-torus-knot>
    <a-sky color="skyblue"> </a-sky>
</a-scene>
````

<p align="center">
 <img src="../docs/img/a3.gif" alt="A-Frame" width="200">
</p>

Ahora bien, si deseamos animar otra propiedad de nuestro elemento, basta con agregar otro `<a-animation>` con sus respectivos atributos. A continuaci贸n animaremos la rotaci贸n del elemento:

```html
<a-scene>
    <a-torus-knot position="0 2 -8" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1">
      <a-animation attribute="position" dur="3000" from="0 2 -8" to="0 2 -3" repeat="indefinite" direction="alternate" > </a-animation>
      <a-animation attribute="rotation" dur="3000" to="0 180 360" repeat="indefinite" direction="alternate"> </a-animation>
    </a-torus-knot>
    <a-sky color="skyblue"> </a-sky>
</a-scene>
````

<p align="center">
 <img src="../docs/img/a4.gif" alt="A-Frame" width="200">
</p>

Tambi茅n es posible animar propiedades especificas del elemento en cuesti贸n. Por ejemplo el color o el radio del torus-knot. Estas propiedades deben especificarse tal como se encuentran en la documentaci贸n oficial de cada elemento, haciendo referencia al nombre del componente y al nombre de la propiedad, en este caso `geometry.radius` o `material.color`.

```html
<a-scene>
    <a-torus-knot position="0 2 -8" color="#C699F7" arc="180" p="2" q="7" radius="1" radius-tubular="0.1">
      <a-animation attribute="position" dur="3000" from="0 2 -8" to="0 2 -3" repeat="indefinite" direction="alternate" > </a-animation>
      <a-animation attribute="rotation" dur="3000" to="0 180 360" repeat="indefinite" direction="alternate"> </a-animation>
      <a-animation attribute="material.color" dur="3000" from="#C699F7" to="#E34B30" repeat="indefinite" direction="alternate"> </a-animation>
      <a-animation attribute="geometry.radius" dur="3000" from=".1" to=".8" repeat="indefinite" direction="alternate"> </a-animation>
    </a-torus-knot>
    <a-sky color="skyblue"> </a-sky>
</a-scene>
````

<p align="center">
 <img src="../docs/img/a5.gif" alt="A-Frame" width="200">
</p>

Para terminar, estos son todos los atributos que componen las animaciones en A-Frame:

* **begin**: Nombre del evento o tiempo a esperar para iniciar la animaci贸n.
* **delay**: Delay en milisegundos o nombre del evento a esperar para iniciar la animaci贸n.
* **direction**: Direcci贸n de la animaci贸n, entre `from` y `to`. Puede ser `alternate`, `alternateReverse`, `normal` o `reverse`. Su valor por defecto es `normal`.
* **dur**: Duraci贸n en milisegundos de la animaci贸n. Su valor por defecto es 1000.
* **easing**: Funci贸n de aceleraci贸n que se aplica a la animaci贸n. Puedes encontrar las diferentes opciones [ac谩](https://aframe.io/docs/0.7.0/core/animations.html#easing). Su valor por defecto es `ease`.
* **end**: Nombre del evento esperar antes de terminar la animaci贸n.
* **fill**: Determina el efecto de la animaci贸n cuando no esta activa. Puede ser `backwards`, `both`, `forwards` o `none`. Su valor por defecto es `forwards`.
* **from**: Valor inicial de la propiedad que se va a animar. Si no se especifica, toma el valor actual del elemento.
* **to**: Valor final de la propiedad que se va a animar. Debe ser especificado.
* **repeat**: N煤mero de repeticiones de la animaci贸n. Puede ser infinito con `indefinite`.

Finalmente, en la [documentaci贸n oficial](https://aframe.io/docs/0.7.0/core/animations.html) puedes encontrar m谩s informaci贸n sobre estos atributos y como utilizarlos.


###  [Soluci贸n](https://codepen.io/fabiojcortes/pen/XZdZWJ)

[](https://github.com/fcor/aframe-workshop/blob/master/ex/4.md)  [](https://github.com/fcor/aframe-workshop/blob/master/ex/6.md)
